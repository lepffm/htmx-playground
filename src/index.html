<html lang="en">
<head>
    <script src="https://unpkg.com/htmx.org"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/client-side-templates.js"></script>
    <script src="https://unpkg.com/mustache@latest"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <title>htmx playground</title>
</head>
<body hx-ext="client-side-templates" class="w-full">
<div>
    <nav class="flex items-center justify-between flex-wrap bg-teal-500 p-6">
        <div class="text-white mr-6">htmx playground</div>
    <ul class="flex">
        <li class="mr-6">
            <a class="text-teal-200 " href="https://github.com/lepffm/issuance/issues" hx-boost="true">my issues</a>
        </li>
        <li class="mr-6">
            <a class="text-teal-200 " href="https://lepffm.github.io/issuance" hx-boost="true">blog</a>
        </li>
    </ul>
    </nav>

    <h2>all issues</h2>
    <!-- hx-get="https://api.github.com/repos/lepffm/issuance/labels" -->
    <div hx-on="htmx:configRequest: event.detail.headers='';"
        hx-get="data/labels.json"
         hx-trigger="load"
        hx-target="#select-labels"
        mustache-array-template="github-issue-list">
    </div>

    <!-- hx-get="https://api.github.com/repos/lepffm/issuance/issues" -->
    <select id="select-labels" name="select-labels" hx-on="htmx:configRequest: event.detail.headers='';"
            hx-target="#github-tr"
            hx-get="data/issues.json"
            mustache-template="github-list"
            >
    </select>

    <div id="tab-content" style="min-height: 100px">
        <table id="github-issues" class="table-auto border-collapse border bg-slate-400">
            <thead>
            <tr>
                <th class="border border-slate-300">number</th>
                <th class="border border-slate-300">title</th>
                <th class="border border-slate-300">label</th>
            </tr>
            </thead>
            <tbody id="github-tr">
            </tbody>
        </table>
    </div>
    <div id="issue-detail" class="flex flex-wrap -mx-3 mb-6"></div>

<!-- templates -->
    <template id="github-issue-list">
        <option value="*">ALL</option>
        {{#data}}
        <option value="{{name}}" title="{{description}}">{{name}}</option>
        {{/data}}
    </template>
    <template id="github-list">
        {{#.}}
        <tr hx-get="data/issue.json" hx-trigger="click" hx-target="#issue-detail"
            mustache-template="github-issue">
            <td class="border border-slate-300">{{number}}</td>
            <td class="border border-slate-300">{{title}}</td>
            <td class="border border-slate-300">{{labels}}</td>
        </tr>
        {{/.}}
    </template>
    <template id="github-issue">
        <div class="bg-gray shadow-md rounded px-8 pt-6 b-8 mb-4  border border-gray-200">
            <div class="mb-4">
                <label>title</label><p>{{title}}</p>
            </div>
            <div class="mb-4">
                <label>labels</label><p>{{labels}}</p>
            </div>
            <button class="bg-blue-500 text-white font-semibold rounded py-2 px-4 border-blue-700" hx-swap="delete" hx-target="#issue-detail">close</button>
        </div>
    </template>
</div>
</body>
<style>
</style>
</html>
